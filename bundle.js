!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addListeners=t.formatScore=t.checkCollision=t.genDirections=t.menuDirections=t.difficulty=t.menuSelections=t.menuStates=t.canvasWidth=t.canvasHeight=void 0;var i=n(6),o=(t.canvasHeight=640,t.canvasWidth=360,t.menuStates={MAIN:"main",OPTIONS:"options",GAME:"game",SCORE_INPUT:"score_input",GAMEOVER:"gameover",CONNECTING:"connecting"},t.menuSelections={GAME:0,OPTIONS:1},t.difficulty={LOL:0,EASY:1,NORMAL:2,HARD:3},t.menuDirections={UP:"up",DOWN:"down"});t.genDirections={UP:0,RIGHT:1,DOWN:2,LEFT:3},t.checkCollision=function(e,t){return!(e.posY+e.hitboxH<t.posY||e.posY>t.posY+t.hitboxH||e.posX+e.hitboxW<t.posX||e.posX>t.posX+t.hitboxW)},t.formatScore=function(e){return e>999999?"999999":e>99999?e:e>9999?"0"+e:e>999?"00"+e:e>99?"000"+e:e>9?"0000"+e:"00000"+e},t.addListeners=function(e){document.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:(0,i.toggleMute)(!1),e.processMainMenuAction=!0;break;case 80:e.pauseGame();break;case 82:e.resetGame();break;case 87:case 38:e.processMenuSelection(o.UP);break;case 83:case 40:e.processMenuSelection(o.DOWN)}})),document.addEventListener("mouseup",(function(t){e.processClickSelection(t.clientX,t.clientY)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o={playerBullet:new i.Howl({src:"./assets/sound/bullet01.mp3",volume:.8}),enemyBasicBullet:new i.Howl({src:"./assets/sound/bullet02.mp3",volume:.3}),hit:new i.Howl({src:"./assets/sound/explosion_hit.mp3"}),explosion:new i.Howl({src:"./assets/sound/explosion_big.flac"})};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(4);var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bullets=e.bullets,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"deleteBullets",value:function(){this.bullets=this.bullets.filter((function(e){return!e.cleanup}))}},{key:"antiBumpTechnology",value:function(){this.speedX=-this.speedX,this.speedY=-this.speedY}}]),t}(((i=s)&&i.__esModule?i:{default:i}).default);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicEnemyBullet=t.PlayerBulletBasic=t.Bullet=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),r=n(4),a=(i=r)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=t.Bullet=function(e){function t(e){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sprite=n.images.beams,n}return c(t,e),o(t,[{key:"move",value:function(){this.posX+=this.speedX,this.posY+=this.speedY,(this.posX<0||this.posX>s.canvasWidth||this.posY<0||this.posY>s.canvasHeight)&&this.destroySelf()}},{key:"destroySelf",value:function(){this.cleanup=!0}}]),t}(a.default);t.PlayerBulletBasic=function(e){function t(e){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hitboxW=20,n.hitboxH=40,n}return c(t,e),o(t,[{key:"move",value:function(){this.posY%3==0&&0!==this.speedX&&(this.posX+=this.speedX),this.posY+=this.speedY,(this.posX<-20||this.posX>s.canvasWidth||this.posY<0||this.posY>s.canvasHeight)&&this.destroySelf()}},{key:"render",value:function(e){this.move(),e.drawImage(this.sprite,140,318,45,77,this.posX,this.posY,this.hitboxW,this.hitboxH)}}]),t}(h),t.BasicEnemyBullet=function(e){function t(e){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hitboxW=19,n.hitboxH=19,n}return c(t,e),o(t,[{key:"move",value:function(){this.posX+=this.speedX,this.posY+=this.speedY,(this.posX<-20||this.posX>s.canvasWidth||this.posY<0||this.posY>s.canvasHeight)&&this.destroySelf()}},{key:"render",value:function(e){this.move(),e.drawImage(this.sprite,36,115,19,19,this.posX,this.posY,this.hitboxW,this.hitboxH)}}]),t}(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(5),r=(i=s)&&i.__esModule?i:{default:i};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u={speedX:0,speedY:0,posX:0,posY:0},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var n=Object.assign({},u,t);this.speedX=n.speedX,this.speedY=n.speedY,this.posX=n.posX,this.posY=n.posY,this.cleanup=!1,this.images=new r.default}return o(e,[{key:"move",value:function(){this.posX+=this.speedX,this.posY+=this.speedY}},{key:"destroySelf",value:function(){this.cleanup=!0}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=null;t.default=function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i||(i=this,this.backgroundImg=new Image,this.backgroundImg.src="./assets/background1.jpg",this.beams=new Image,this.beams.src="./assets/beams.png",this.explosion=new Image,this.explosion.src="./assets/explosion.png",this.enemySuicider=new Image,this.enemySuicider.src="./assets/enemy_suicider.png",this.enemyGrunt=new Image,this.enemyGrunt.src="./assets/enemy_grunt.png",this.enemySaucerRed=new Image,this.enemySaucerRed.src="./assets/enemy_saucer_red.png",this.enemySaucerGreen=new Image,this.enemySaucerGreen.src="./assets/enemy_saucer_green.png",this.enemyOculus=new Image,this.enemyOculus.src="./assets/enemy_oculus.png",this.playerShip=new Image,this.playerShip.src="./assets/playership.png",this.playerShipR=new Image,this.playerShipR.src="./assets/playership-right.png",this.playerShipL=new Image,this.playerShipL.src="./assets/playership-left.png"),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleMute=void 0;var i=a(n(9)),o=n(7),s=a(n(8)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var u=!0;document.querySelector("#mute-control");Howler.mute(u),new o.Howl({autoplay:!0,loop:!0,src:"./assets/music/bensound-scifi.mp3"}).play();t.toggleMute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;Howler.mute(e)};window.localStorage.hiScore=window.localStorage.hiScore||0,document.addEventListener("DOMContentLoaded",(function(){var e=new i.default,t=new s.default;function n(t){e.run(60,r.menuStates.MAIN,t)}window.onload=function(){e.run(60,r.menuStates.CONNECTING,null),setTimeout((function(){t.httpGetAsync("http://localhost:5000/scores/",1e4,"2",n)}),2e3)}}))},function(e,t,n){(function(n){var i;
/*!
 *  howler.js v2.0.5
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var e=this||s;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||s;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),o=0;o<i.length;o++){var r=t._howls[n]._soundById(i[o]);r&&r._node&&(r._node.volume=r._volume*e)}return t}return t._volume},mute:function(e){var t=this||s;t.ctx||f(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),o=0;o<i.length;o++){var r=t._howls[n]._soundById(i[o]);r&&r._node&&(r._node.muted=!!e||r._muted)}return t},unload:function(){for(var e=this||s,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||s)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||s;if(e.state=e.ctx&&e.ctx.state||"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||s,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),o=i&&parseInt(i[0].split("/")[1],10)<33;return e._codecs={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||s,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(){s._autoResume();var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&s.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then((function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())})))}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&s.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var s=new o,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return s.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=s.usingWebAudio&&!t._html5,void 0!==s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(s.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,i;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(i=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(i))||(n=/\.([^.]+)$/.exec(i.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&s.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var o=0,r=0;r<n._sounds.length;r++)n._sounds[r]._paused&&!n._sounds[r]._ended&&(o++,i=n._sounds[r]._id);1===o?e=null:i=null}}var a=i?n._soundById(i):n._inactiveSound();if(!a)return null;if(i&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state){a._sprite=e,a._ended=!1;var u=a._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(i&&!a._paused)return t||setTimeout((function(){n._emit("play",a._id)}),0),a._id;n._webAudio&&s._autoResume();var l=Math.max(0,a._seek>0?a._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),h=1e3*c/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=e,a._seek=l,a._start=n._sprite[e][0]/1e3,a._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,a._loop=!(!a._loop&&!n._sprite[e][2]);var d=a._node;if(n._webAudio){var f=function(){n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;d.gain.setValueAtTime(e,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===d.bufferSource.start?a._loop?d.bufferSource.noteGrainOn(0,l,86400):d.bufferSource.noteGrainOn(0,l,c):a._loop?d.bufferSource.start(0,l,86400):d.bufferSource.start(0,l,c),h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),t||setTimeout((function(){n._emit("play",a._id)}),0)};"running"===s.state?f():(n.once("resume",f),n._clearTimer(a._id))}else{var p=function(){d.currentTime=l,d.muted=a._muted||n._muted||s._muted||d.muted,d.volume=a._volume*s.volume(),d.playbackRate=a._rate;try{if(d.play(),d.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),t||n._emit("play",a._id)}catch(e){n._emit("playerror",a._id,e)}},_=window&&window.ejecta||!d.readyState&&s._navigator.isCocoonJS;if(4===d.readyState||_)p();else{var m=function(){p(),d.removeEventListener(s._canPlayEvent,m,!1)};d.addEventListener(s._canPlayEvent,m,!1),n._clearTimer(a._id)}}return a._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),i=0;i<n.length;i++){t._clearTimer(n[i]);var o=t._soundById(n[i]);if(o&&!o._paused&&(o._seek=t.seek(n[i]),o._rateSeek=0,o._paused=!0,t._stopFade(n[i]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var i=n._getSoundIds(e),o=0;o<i.length;o++){n._clearTimer(i[o]);var s=n._soundById(i[o]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,n._stopFade(i[o]),s._node&&(n._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),n._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause())),t||n._emit("stop",s._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(t),o=0;o<i.length;o++){var r=n._soundById(i[o]);r&&(r._muted=e,n._webAudio&&r._node?r._node.gain.setValueAtTime(e?0:r._volume,s.ctx.currentTime):r._node&&(r._node.muted=!!s._muted||e),n._emit("mute",r._id))}return n},volume:function(){var e,t,n,i=this,o=arguments;if(0===o.length)return i._volume;if(1===o.length||2===o.length&&void 0===o[1]){var r=i._getSoundIds(),a=r.indexOf(o[0]);a>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var u=0;u<t.length;u++)(n=i._soundById(t[u]))&&(n._volume=e,o[2]||i._stopFade(t[u]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,s.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*s.volume()),i._emit("volume",n._id));return i},fade:function(e,t,n,i){var o=this;if("loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(e,t,n,i)}}),o;o.volume(e,i);for(var r=o._getSoundIds(i),a=0;a<r.length;a++){var u=o._soundById(r[a]);if(u){if(i||o._stopFade(r[a]),o._webAudio&&!u._muted){var l=s.ctx.currentTime,c=l+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,c)}o._startFadeInterval(u,e,t,n,r[a])}}return o},_startFadeInterval:function(e,t,n,i,o){var s=this,r=t,a=t>n?"out":"in",u=Math.abs(t-n)/.01,l=u>0?i/u:i;l<4&&(u=Math.ceil(u/(4/l)),l=4),e._interval=setInterval((function(){u>0&&(r+="in"===a?.01:-.01),r=Math.max(0,r),r=Math.min(1,r),r=Math.round(100*r)/100,s._webAudio?(void 0===o&&(s._volume=r),e._volume=r):s.volume(r,e._id,!0),(n<t&&r<=n||n>t&&r>=n)&&(clearInterval(e._interval),e._interval=null,s.volume(n,e._id),s._emit("fade",e._id))}),l)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(t._interval),t._interval=null,this._emit("fade",e)),this},loop:function(){var e,t,n,i=this,o=arguments;if(0===o.length)return i._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=i._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],i._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var s=i._getSoundIds(t),r=0;r<s.length;r++)(n=i._soundById(s[r]))&&(n._loop=e,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return i},rate:function(){var e,t,n,i=this,o=arguments;if(0===o.length)t=i._sounds[0]._id;else if(1===o.length){var r=i._getSoundIds(),a=r.indexOf(o[0]);a>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("number"!=typeof e)return(n=i._soundById(t))?n._rate:i._rate;if("loaded"!==i._state)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var u=0;u<t.length;u++)if(n=i._soundById(t[u])){n._rateSeek=i.seek(t[u]),n._playStart=i._webAudio?s.ctx.currentTime:n._playStart,n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.value=e:n._node&&(n._node.playbackRate=e);var l=i.seek(t[u]),c=(i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-l,h=1e3*c/Math.abs(n._rate);!i._endTimers[t[u]]&&n._paused||(i._clearTimer(t[u]),i._endTimers[t[u]]=setTimeout(i._ended.bind(i,n),h)),i._emit("rate",n._id)}return i},seek:function(){var e,t,n=this,i=arguments;if(0===i.length)t=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),r=o.indexOf(i[0]);r>=0?t=parseInt(i[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(void 0===t)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?s.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+u*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),a._seek=e,a._ended=!1,n._clearTimer(t),c&&n.play(t,!0),!n._webAudio&&a._node&&(a._node.currentTime=e),n._emit("seek",t)}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){if(t[n]._paused||e.stop(t[n]._id),!e._webAudio)/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(s._canPlayEvent,t[n]._loadFn,!1);delete t[n]._node,e._clearTimer(t[n]._id);var i=s._howls.indexOf(e);i>=0&&s._howls.splice(i,1)}var o=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===e._src){o=!1;break}return u&&o&&delete u[e._src],s.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,i){var o=this["_on"+e];return"function"==typeof t&&o.push(i?{id:n,fn:t,once:i}:{id:n,fn:t}),this},off:function(e,t,n){var i=this["_on"+e],o=0;if("number"==typeof t&&(n=t,t=null),t||n)for(o=0;o<i.length;o++){var s=n===i[o].id;if(t===i[o].fn&&s||!t&&s){i.splice(o,1);break}}else if(e)this["_on"+e]=[];else{var r=Object.keys(this);for(o=0;o<r.length;o++)0===r[o].indexOf("_on")&&Array.isArray(this[r[o]])&&(this[r[o]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var i=this["_on"+e],o=i.length-1;o>=0;o--)i[o].id&&i[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,i[o].fn),0),i[o].once&&this.off(e,i[o].fn,i[o].id));return this},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,(function(){e._queue.shift(),e._loadQueue()})),t.action()}return e},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=s.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),i)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),s._autoSuspend()),this._webAudio||n||this.stop(e._id),this},_clearTimer:function(e){return this._endTimers[e]&&(clearTimeout(this._endTimers[e]),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new a(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=s.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,this},_cleanBuffer:function(e){if(this._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=this._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++s._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=s._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),this._node.gain.setValueAtTime(t,s.ctx.currentTime),this._node.paused=!0,this._node.connect(s.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(s._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*s.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++s._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(s._canPlayEvent,this._loadFn,!1)}};var u={},l=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);h(i.buffer,e)}else{var s=new XMLHttpRequest;s.open("GET",t,!0),s.withCredentials=e._xhrWithCredentials,s.responseType="arraybuffer",s.onload=function(){var t=(s.status+"")[0];"0"===t||"2"===t||"3"===t?h(s.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},c(s)}},c=function(e){try{e.send()}catch(t){e.onerror()}},h=function(e,t){s.ctx.decodeAudioData(e,(function(e){e&&t._sounds.length>0&&(u[t._src]=e,d(t,e))}),(function(){t._emit("loaderror",null,"Decoding audio data failed.")}))},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(e){s.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),t=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());(s._navigator&&s._navigator.standalone&&!i||s._navigator&&!s._navigator.standalone&&!i)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=s._muted?0:1,s.masterGain.connect(s.ctx.destination)),s._setup()};void 0===(i=function(){return{Howler:s,Howl:r}}.apply(t,[]))||(e.exports=i),t.Howler=s,t.Howl=r,"undefined"!=typeof window?(window.HowlerGlobal=o,window.Howler=s,window.Howl=r,window.Sound=a):void 0!==n&&(n.HowlerGlobal=o,n.Howler=s,n.Howl=r,n.Sound=a)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.5
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,i,o,s){if(!this.ctx||!this.ctx.listener)return this;var r=this._orientation;return t="number"!=typeof t?r[1]:t,n="number"!=typeof n?r[2]:n,i="number"!=typeof i?r[3]:i,o="number"!=typeof o?r[4]:o,s="number"!=typeof s?r[5]:s,"number"!=typeof e?r:(this._orientation=[e,t,n,i,o,s],this.ctx.listener.setOrientation(e,t,n,i,o,s),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,n)}}),i;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var s=i._getSoundIds(n),r=0;r<s.length;r++){var a=i._soundById(s[r]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,o),"spatial"===o?a._panner.setPosition(e,0,0):a._panner.pan.value=e),i._emit("stereo",a._id)}}return i},Howl.prototype.pos=function(e,n,i,o){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(e,n,i,o)}}),s;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,void 0===o){if("number"!=typeof e)return s._pos;s._pos=[e,n,i]}for(var r=s._getSoundIds(o),a=0;a<r.length;a++){var u=s._soundById(r[a]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,i],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),u._panner.setPosition(e,n,i)),s._emit("pos",u._id)}}return s},Howl.prototype.orientation=function(e,n,i,o){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(e,n,i,o)}}),s;if(n="number"!=typeof n?s._orientation[1]:n,i="number"!=typeof i?s._orientation[2]:i,void 0===o){if("number"!=typeof e)return s._orientation;s._orientation=[e,n,i]}for(var r=s._getSoundIds(o),a=0;a<r.length;a++){var u=s._soundById(r[a]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,i],u._node&&(u._panner||(u._pos||(u._pos=s._pos||[0,0,-.5]),t(u,"spatial")),u._panner.setOrientation(e,n,i)),s._emit("orientation",u._id)}}return s},Howl.prototype.pannerAttr=function(){var e,n,i,o=this,s=arguments;if(!o._webAudio)return o;if(0===s.length)return o._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(i=o._soundById(parseInt(s[0],10)))?i._pannerAttr:o._pannerAttr;e=s[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===s.length&&(e=s[0],n=parseInt(s[1],10));for(var r=o._getSoundIds(n),a=0;a<r.length;a++)if(i=o._soundById(r[a])){var u=i._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var l=i._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(i._pos||(i._pos=o._pos||[0,0,-.5]),t(i,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(this,n(15))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.topTen=null}return i(e,[{key:"httpGetAsync",value:function(e,t,n,i){var o=new XMLHttpRequest,s="difficulty="+n;o.onreadystatechange=function(){4==o.readyState&&200==o.status?(this.topTen=JSON.parse(JSON.parse(this.responseText)),i(this.topTen)):500==o.status&&i(null)},o.ontimeout=function(){i(null)},o.onerror=function(){i(null)},o.timeout=t,o.open("GET",e+"?"+s,!0),o.send(null)}},{key:"httpPostAsync",value:function(e,t,n,i,o,s){var r=new XMLHttpRequest,a="initials="+n+"&score="+i+"&difficulty="+o;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&(this.topTen=JSON.parse(JSON.parse(this.responseText)),s(this.topTen))},r.timeout=t,r.open("POST",e,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.ontimeout=function(){console.log("Post timeout event :("),s(null)},r.onerror=function(){console.log("Http error event :("),s(null)},r.send(a)}},{key:"getCallback",value:function(e){console.log(e)}},{key:"getTopTen",value:function(){return this.topTen}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=d(n(10)),s=d(n(11)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=d(n(1)),u=d(n(19)),l=d(n(20)),c=d(n(21)),h=d(n(8));function d(e){return e&&e.__esModule?e:{default:e}}var f,p,_,m,v=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bgCanvas=document.querySelector("#background-canvas"),this.canvas=document.querySelector("#game-canvas"),this.UICanvas=document.querySelector("#ui-canvas"),this.canvasContext=this.canvas.getContext("2d"),this.bgContext=this.bgCanvas.getContext("2d"),this.UIContext=this.UICanvas.getContext("2d"),this.scores={score:0,hiScore:parseInt(window.localStorage.hiScore)},this.bg=new o.default,this.ui=new l.default(this),this.player=new c.default,this.processMainMenuAction=!1,this.mmState=r.menuStates.MAIN,this.mmSelection=r.menuSelections.GAME,this.difficulty=r.difficulty.NORMAL,this.showGameOverScreen=!1,this.paused=!1,this.bullets=[],this.enemies=[],this.explosions=[],this.needRestart=!1,this.isSecondGOClick=0,this.loadingState=0,this.renderLoadingTrackerTick=0,this.highScores=null,this.initial1=0,this.initial2=0,this.initial3=0,this.scoreRefresh=!0,r.addListeners(this)}return i(e,[{key:"run",value:function(e,t,n){t==r.menuStates.CONNECTING?this.mmState=r.menuStates.CONNECTING:(this.mmState=r.menuStates.MAIN,this.highScores=n),f=1e3/e,_=Date.now(),_,this.render()}},{key:"pauseGame",value:function(){this.pause=!this.pause}},{key:"resetGame",value:function(){this.player={},this.player=new c.default,this.scores.score=0,this.bullets.length=0,this.enemies.length=0,this.explosions.length=0,this.showGameOverScreen=!1,this.needRestart=!1,this.scoreRefresh=!0,s.default.spawnEnemies()}},{key:"cleanup",value:function(){this.enemies=this.enemies.filter((function(e){return!e.cleanup})),this.explosions=this.explosions.filter((function(e){return!e.cleanup})),0===this.enemies.length&&s.default.spawnEnemies()}},{key:"deleteBullets",value:function(){var e=this;this.bullets=this.bullets.filter((function(e){return!e.cleanup})),this.enemies.forEach((function(t){t.bullets=e.bullets}))}},{key:"handlePlayerAction",value:function(){var e=this;this.player.playerBullets.forEach((function(t){t.render(e.canvasContext),e.enemies.forEach((function(n){n.posY+n.hitboxH>=0&&r.checkCollision(n,t)&&(e.handleBulletHit(t,n),e.scores.score+=5,e.player.deleteBullets())}))}))}},{key:"handleBulletHit",value:function(e,t){a.default.hit.play(),this.explosions.push(new u.default([e.posX,"Player"===t.constructor.name?e.posY:e.posY-20])),e.destroySelf(),this.deleteBullets(),t.hp--,t.hp<=0&&(t.destroySelf(),this.cleanup(),a.default.explosion.play(),this.explosions.push(new u.default([e.posX,"Player"===t.constructor.name?e.posY:e.posY-20],64)),this.player.cleanup&&(this.showGameOverScreen=!0,this.mmState=r.menuStates.SCORE_INPUT,this.needRestart=!0))}},{key:"clearGameCanvas",value:function(){this.canvasContext.clearRect(0,0,r.canvasWidth,r.canvasHeight)}},{key:"processMenuSelection",value:function(e){switch(e){case r.menuDirections.UP:this.mmState==r.menuStates.MAIN?this.mmSelection!=r.menuSelections.GAME&&(this.mmSelection=this.mmSelection-1):this.mmState==r.menuStates.OPTIONS&&this.difficulty!=r.difficulty.EASY&&(this.difficulty=this.difficulty-1);break;case r.menuDirections.DOWN:this.mmState==r.menuStates.MAIN?this.mmSelection!=r.menuSelections.OPTIONS&&(this.mmSelection=this.mmSelection+1):this.mmState==r.menuStates.OPTIONS&&this.difficulty!=r.difficulty.HARD&&(this.difficulty=this.difficulty+1)}}},{key:"processClickSelection",value:function(e,t){if(this.mmState!=r.menuStates.GAME){var n=document.getElementById("c-container").getBoundingClientRect(),i=Math.floor(e-n.left),o=Math.floor((t-n.top)*(r.canvasHeight/document.getElementById("m-container").offsetHeight));this.mmState==r.menuStates.MAIN?this.handleMainMenuClickEvent(o):this.mmState==r.menuStates.OPTIONS?this.handleOptionsMenuClickEvent(o):this.mmState==r.menuStates.SCORE_INPUT?this.handleScoreMenuClickEvent(i,o,n):this.mmState==r.menuStates.GAMEOVER&&1==this.isSecondGOClick?(this.mmState=r.menuStates.MAIN,this.isSecondGOClick=0):this.mmState==r.menuStates.GAMEOVER&&this.isSecondGOClick++}}},{key:"getNextLetterPosition",value:function(e){return++e>v.length-1&&(e=0),e}},{key:"getPreviousLetterPosition",value:function(e){return--e<0&&(e=v.length-1),e}},{key:"handleScoreMenuClickEvent",value:function(e,t,n){var i=Math.floor(parseInt(n.width/3)),o=Math.floor(parseInt(2*n.width/3)),s=Math.floor(parseInt(i+(o-i)/3)),r=Math.floor(parseInt(i+(o-i)/1.5));Math.floor(parseInt(i+2*(o-i)/3));e>i&&e<=s&&t>=315&&t<=370?this.initial1=this.getNextLetterPosition(this.initial1):e>s&&e<=r&&t>=315&&t<=370?this.initial2=this.getNextLetterPosition(this.initial2):e>r&&e<o&&t>=315&&t<=370?this.initial3=this.getNextLetterPosition(this.initial3):e>i&&e<=s&&t>=410&&t<=460?this.initial1=this.getPreviousLetterPosition(this.initial1):e>s&&e<=r&&t>=410&&t<=460?this.initial2=this.getPreviousLetterPosition(this.initial2):e>r&&e<o&&t>=410&&t<=460?this.initial3=this.getPreviousLetterPosition(this.initial3):e>=i&&e<=o&&t>=520&&t<=560&&(console.log("Submitting score..."),this.submitScore())}},{key:"getUpdatedScores",value:function(){var e=this;this.mmState=r.menuStates.CONNECTING;var t=new h.default,n=null;function i(e){n=e}t.httpGetAsync("http://localhost:5000/scores/",1e4,String(this.difficulty),(this.difficulty,i)),setTimeout((function(){e.highScores=n,e.scoreRefresh=!1,e.mmState=r.menuStates.SCORE_INPUT}),4e3)}},{key:"submitScore",value:function(){var e=this;this.mmState=r.menuStates.CONNECTING;var t=new h.default,n=v[this.initial1]+v[this.initial2]+v[this.initial3],i=null;function o(e){i=e}t.httpPostAsync("http://localhost:5000/scores/new/",1e4,n,this.scores.score,String(this.difficulty),(this.scores.score,o)),setTimeout((function(){e.highScores=i,e.mmState=r.menuStates.GAMEOVER}),8e3)}},{key:"handleOptionsMenuClickEvent",value:function(e){e>=275&&e<=315&&this.difficulty==r.difficulty.EASY?this.processMenuAction():e>=275&&e<=315&&this.difficulty==r.difficulty.NORMAL?this.processMenuSelection(r.menuDirections.UP):e>=275&&e<=315&&this.difficulty==r.difficulty.HARD?(this.processMenuSelection(r.menuDirections.UP),this.processMenuSelection(r.menuDirections.UP)):e>=325&&e<=365&&this.difficulty==r.difficulty.NORMAL?this.processMenuAction():e>=325&&e<=365&&this.difficulty==r.difficulty.EASY?this.processMenuSelection(r.menuDirections.DOWN):e>=325&&e<=365&&this.difficulty==r.difficulty.HARD?this.processMenuSelection(r.menuDirections.UP):e>=375&&e<=415&&this.difficulty==r.difficulty.HARD?this.processMenuAction():e>=375&&e<=415&&this.difficulty==r.difficulty.NORMAL?this.processMenuSelection(r.menuDirections.DOWN):e>=375&&e<=415&&this.difficulty==r.difficulty.EASY&&(this.processMenuSelection(r.menuDirections.DOWN),this.processMenuSelection(r.menuDirections.DOWN))}},{key:"handleMainMenuClickEvent",value:function(e){e>=320&&e<=360&&this.mmSelection==r.menuSelections.GAME?this.processMenuAction():e>=320&&e<=360&&this.mmSelection==r.menuSelections.OPTIONS?this.processMenuSelection(r.menuDirections.UP):e>=375&&e<=415&&this.mmSelection==r.menuSelections.OPTIONS?this.processMenuAction():e>=375&&e<=415&&this.mmSelection==r.menuSelections.GAME&&this.processMenuSelection(r.menuDirections.DOWN)}},{key:"processMenuAction",value:function(){switch(this.mmState){case r.menuStates.MAIN:this.mmSelection==r.menuSelections.GAME?(s.default.init(this),s.default.spawnEnemies(),this.mmState=r.menuStates.GAME):this.mmSelection==r.menuSelections.OPTIONS&&(this.mmState=r.menuStates.OPTIONS);break;case r.menuStates.OPTIONS:this.mmState=r.menuStates.MAIN;break;case r.menuStates.GAME:break;case r.menuStates.GAMEOVER:this.mmState=r.menuStates.MAIN}}},{key:"render",value:function(){p=Date.now(),(m=p-_)>f?(_=p-m%f,this.pause||(this.bg.render(this.bgContext),this.clearGameCanvas(),1==this.processMainMenuAction&&(this.processMenuAction(),this.processMainMenuAction=!1),this.mmState==r.menuStates.GAME?(1==this.needRestart&&this.resetGame(),this.renderGame()):this.mmState==r.menuStates.OPTIONS?this.renderOptionsScreen(this.canvasContext):this.mmState==r.menuStates.SCORE_INPUT?this.renderScoreScreen(this.canvasContext):this.mmState==r.menuStates.GAMEOVER?this.renderGameOverScreen(this.canvasContext):this.mmState==r.menuStates.CONNECTING?(this.renderLoadingScreen(this.canvasContext),this.renderLoadingTrackerTick++,this.renderLoadingTrackerTick>60&&(this.renderLoadingTrackerTick=0)):this.renderTitleScreen(this.canvasContext)),window.requestAnimationFrame(this.render.bind(this))):window.requestAnimationFrame(this.render.bind(this))}},{key:"renderGame",value:function(){var e=this;this.enemies.forEach((function(t){t.render(e.canvasContext),!r.checkCollision(t,e.player)||e.player.iframe||e.showGameOverScreen||(a.default.explosion.play(),e.explosions.push(new u.default([e.player.posX+5,e.player.posY-10],64)),e.player.iframe=10,e.player.hp--,e.player.hp<=0&&(e.showGameOverScreen=!0,e.mmState=r.menuStates.SCORE_INPUT,e.needRestart=!0))})),this.bullets.forEach((function(t){t.render(e.canvasContext),r.checkCollision(t,e.player)&&(e.player.iframe||e.showGameOverScreen||(e.handleBulletHit(t,e.player),e.player.iframe=30))})),this.showGameOverScreen?this.mmState=r.menuStates.SCORE_INPUT:(this.player.render(this.canvasContext),this.handlePlayerAction()),this.explosions.forEach((function(t){return t.render(e.canvasContext)})),this.ui.render(this.UIContext)}},{key:"renderTitleScreen",value:function(e){e.fillStyle="#32cd32",e.font="48px arcadeclassicregular",e.fillText("PlasmaPulse",35,200),e.fillText("(ALPHA)",90,250),e.fillStyle="white",e.font="30px arcadeclassicregular",this.mmSelection==r.menuSelections.GAME?(e.fillText("Engage<",125,350),e.fillText("Options",125,400)):(e.fillText("Engage",125,350),e.fillText("Options<",125,400))}},{key:"renderOptionsScreen",value:function(e){this.clearGameCanvas(),e.fillStyle="white",e.font="50px arcadeclassicregular",e.fillText("Difficulty",55,200),e.fillStyle="white",e.font="30px arcadeclassicregular",this.difficulty==r.difficulty.EASY?(e.fillText("Easy<",75,300),e.fillText("Normal",75,350),e.fillText("Hard",75,400)):this.difficulty==r.difficulty.NORMAL?(e.fillText("Easy",75,300),e.fillText("Normal<",75,350),e.fillText("Hard",75,400)):(e.fillText("Easy",75,300),e.fillText("Normal",75,350),e.fillText("Hard<",75,400))}},{key:"renderScoreEntryScreen",value:function(e){e.font="30px arcadeclassicregular",e.fillStyle="#32cd32",e.fillText("NEW HIGH SCORE!",60,100),e.fillText(r.formatScore(this.scores.score),130,150),e.font="30px arcadeclassicregular",e.fillStyle="white",e.fillText("Enter initials",64,250),e.fillText("+   +   +",126,350),e.fillText(v[this.initial1]+"   "+v[this.initial2]+"   "+v[this.initial3],126,400),e.fillText("_   _   _",126,430),e.fillText("[> Submit <]",100,550)}},{key:"renderScoreScreen",value:function(e){1==this.scoreRefresh&&this.getUpdatedScores(),null==this.highScores?this.mmState=r.menuStates.GAMEOVER:0==this.highScores.length||this.highScores.length<10?this.renderScoreEntryScreen(e):parseInt(this.scores.score)>parseInt(this.highScores[this.highScores.length-1].fields.score)?this.renderScoreEntryScreen(e):this.mmState=r.menuStates.GAMEOVER}},{key:"getDifficultyString",value:function(){var e="L0L Y0U CH34T M8? H4X0R!";return this.difficulty==r.difficulty.EASY?e="Easy":this.difficulty==r.difficulty.NORMAL?e="Normal":(this.difficulty,r.difficulty.HARD),e}},{key:"renderGameOverScreen",value:function(e){if(this.player.hp=0,e.font="48px arcadeclassicregular",e.fillStyle="red",e.fillText("GAME OVER",60,100),e.font="22px arcadeclassicregular",e.fillStyle="white",e.fillText("(Difficulty Level: "+this.difficulty+")",60,150),e.font="24px arcadeclassicregular",e.fillStyle="yellow",e.fillText("--- High Scores ---",66,180),e.font="20px arcadeclassicregular",e.fillStyle="white",null==this.highScores)e.fillText(">Connection Error<",80,200);else{var t,n=210;for(t=0;t<this.highScores.length;t++)e.fillText(t+1+". - "+this.highScores[t].fields.initials+" - "+this.highScores[t].fields.score,100,n),n+=40}}},{key:"renderLoadingScreen",value:function(e){e.font="48px arcadeclassicregular",e.fillStyle="yellow",0==this.loadingState?(e.fillText("LOADING.",60,280),20==this.renderLoadingTrackerTick&&this.loadingState++):1==this.loadingState?(e.fillText("LOADING..",60,280),40==this.renderLoadingTrackerTick&&this.loadingState++):2==this.loadingState?(e.fillText("LOADING...",60,280),60==this.renderLoadingTrackerTick&&this.loadingState++):(e.fillText("LOADING....",60,280),60==this.renderLoadingTrackerTick&&this.loadingState++,this.loadingState>3&&(this.loadingState=0))}}]),e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=r(n(4)),s=r(n(5));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{speedY:2})),n=new s.default;return e.backgroundImg=n.backgroundImg,e.tick=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(e){this.tick%2==0&&(e.drawImage(this.backgroundImg,this.posX,this.posY),e.drawImage(this.backgroundImg,this.posX,this.posY-this.backgroundImg.height),this.posY+=this.speedY,this.posY>=this.backgroundImg.height&&(this.posY=0),this.tick>300&&(this.tick=0)),this.tick++}}]),t}(o.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(12));var o={init:function(e){this.game=e,this.scores=e.scores,this.waves=[this.addGrunt,this.addSaucer,this.addTwoSaucers,this.addOculus]},spawnEnemies:function(){this.scores.score<45?this.addGrunt():this.scores.score<145?(this.addGrunt(),this.addGrunt()):this.scores.score<290?(this.addGrunt(),this.addGrunt(),this.addGrunt()):this.scores.score<400?this.addSaucer():this.scores.score<700?(this.addGrunt(),this.addSaucer()):this.scores.score<1e3?this.addTwoSaucers():this.scores.score<1400?(this.addTwoSaucers(),this.addGrunt()):this.scores.score<1700?this.addOculus():this.scores.score<2100?(this.addOculus(),this.addGrunt()):this.scores.score<3200?this.randomWave():(this.randomWave(),this.randomWave())},addGrunt:function(){this.game.enemies.push(new i.GruntShip({bullets:this.game.bullets},this.game.difficulty))},addSaucer:function(){this.game.enemies.push(new i.SaucerShip({bullets:this.game.bullets},this.game.difficulty))},addSuicider:function(){this.game.enemies.push(new i.Suicider({bullets:this.game.bullets},this.game.difficulty))},addTwoSaucers:function(){this.game.enemies.push(new i.SaucerShip({bullets:this.game.bullets,posX:20},this.game.difficulty)),this.game.enemies.push(new i.SaucerShipV2({bullets:this.game.bullets,posX:220,posY:-400},this.game.difficulty))},addOculus:function(){this.game.enemies.push(new i.OculusShip({bullets:this.game.bullets},this.game.difficulty))},randomWave:function(){this.waves[Math.floor(Math.random()*this.waves.length)].call(o),this.waves[Math.floor(Math.random()*this.waves.length)].call(o)}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OculusShip=t.SaucerShipV2=t.SaucerShip=t.GruntShip=t.Suicider=void 0;var i=u(n(13)),o=u(n(14)),s=u(n(16)),r=u(n(17)),a=u(n(18));function u(e){return e&&e.__esModule?e:{default:e}}t.Suicider=i.default,t.GruntShip=o.default,t.SaucerShip=s.default,t.SaucerShipV2=r.default,t.OculusShip=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2);var r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.sprite=i.images.enemySuicider,i.tickCount=0,i.posX=Math.abs(Math.floor(300*Math.random())),i.hp=5,i.hitboxW=16,i.hitboxH=38,i.sprites=[],i.difficulty=n;for(var o=0;o<=3;o++)i.sprites.push([i.sprite,16*o,0,16,38]);for(var s=3;s>=0;s--)i.sprites.push([i.sprite,16*s,0,16,38]);return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"move",value:function(){this.posY+=2}},{key:"render",value:function(e){this.move(),e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.getSprite()).concat([this.posX,this.posY,this.hitboxW,this.hitboxH]))}},{key:"getSprite",value:function(){this.tickCount>=40&&(this.tickCount=0);var e=this.sprites[Math.floor(this.tickCount/10)];return this.tickCount++,e}}]),t}(((i=s)&&i.__esModule?i:{default:i}).default);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(2)),s=n(3),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({speedX:2,posY:-100,posX:Math.abs(Math.floor(Math.random()*r.canvasWidth)-50)},e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.hp=10,i.sprite=i.images.enemyGrunt,i.tickCount=0,i.boundY=20*Math.floor(6*Math.random())+20,i.hitboxW=48,i.hitboxH=72,i.sprites=[],i.difficulty=n;for(var o=0;o<=3;o++)i.sprites.push([i.sprite,32*o,0,32,48]);for(var s=3;s>=0;s--)i.sprites.push([i.sprite,32*s,0,32,48]);return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"move",value:function(){this.posY<this.boundY?this.posY+=2:(this.tickCount%40==0&&2*Math.random()>1&&this.fireBullet(),this.posX+this.speedX>=0&&this.posX+this.speedX<=r.canvasWidth-this.hitboxW?this.posX+=this.speedX:this.antiBumpTechnology())}},{key:"fireBullet",value:function(){a.default.enemyBasicBullet.play();var e={posX:this.posX+Math.floor(this.hitboxW/2)-10,posY:this.posY+this.hitboxH-20},t=Object.assign({speedX:0,speedY:5},e),n=Object.assign({speedX:-3,speedY:4},e),i=Object.assign({speedX:3,speedY:4},e),o=Object.assign({speedX:-1,speedY:4},e),u=Object.assign({speedX:1,speedY:4},e);this.difficulty==r.difficulty.EASY?this.bullets.push(new s.BasicEnemyBullet(t)):this.difficulty==r.difficulty.NORMAL?this.bullets.push(new s.BasicEnemyBullet(t),new s.BasicEnemyBullet(n),new s.BasicEnemyBullet(i)):this.bullets.push(new s.BasicEnemyBullet(t),new s.BasicEnemyBullet(n),new s.BasicEnemyBullet(i),new s.BasicEnemyBullet(o),new s.BasicEnemyBullet(u))}},{key:"render",value:function(e){this.move(),e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.getSprite()).concat([this.posX,this.posY,this.hitboxW,this.hitboxH]))}},{key:"getSprite",value:function(){this.tickCount>=80&&(this.tickCount=0);var e=this.sprites[Math.floor(this.tickCount/10)];return this.tickCount++,e}}]),t}(o.default);t.default=l},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(2)),s=n(3),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({speedY:3,posY:-100,posX:Math.floor(r.canvasWidth/2-60)},e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.hp=36,i.sprite=i.images.enemySaucerRed,i.tickCount=0,i.hitboxW=96,i.hitboxH=90,i.sprites=[],i.difficulty=n;for(var o=0;o<=6;o++)i.sprites.push([i.sprite,96*o,0,96,90]);for(var s=6;s>=0;s--)i.sprites.push([i.sprite,96*s,0,96,90]);return i.difficulty==r.difficulty.EASY?i.BULLET_VECTORS=[[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2]]:i.difficulty==r.difficulty.NORMAL?i.BULLET_VECTORS=[[0,5],[0,-5],[5,0],[-5,0],[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2]]:i.BULLET_VECTORS=[[0,5],[0,-5],[5,0],[-5,0],[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2],[3,2],[3,-2],[-3,-2],[-3,2]],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"move",value:function(){if(70===this.tickCount&&this.fireBullet(),this.posY<0)this.posY+=2;else{if(this.tickCount>65&&this.tickCount<100)return!1;this.posY+this.speedY>=0&&this.posY+this.speedY<=r.canvasHeight-this.hitboxH?this.posY+=this.speedY:this.antiBumpTechnology()}}},{key:"fireBullet",value:function(){var e=this;a.default.enemyBasicBullet.play();var t={posX:this.posX+Math.floor(this.hitboxW/2)-10,posY:this.posY+Math.floor(this.hitboxH/2)-10};this.BULLET_VECTORS.forEach((function(n){var i=Object.assign({speedX:n[0],speedY:n[1]},t);e.bullets.push(new s.BasicEnemyBullet(i))}))}},{key:"render",value:function(e){this.move(),e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.getSprite()).concat([this.posX,this.posY,this.hitboxW,this.hitboxH]))}},{key:"getSprite",value:function(){this.tickCount>=140&&(this.tickCount=0);var e=this.sprites[Math.floor(this.tickCount/10)];return this.tickCount++,e}}]),t}(o.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(2)),s=n(3),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({speedY:3,posY:-100,posX:Math.floor(r.canvasWidth/2-60)},e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.hp=45,i.sprite=i.images.enemySaucerGreen,i.tickCount=0,i.hitboxW=96,i.hitboxH=90,i.sprites=[],i.difficulty=n;for(var o=0;o<=6;o++)i.sprites.push([i.sprite,96*o,0,96,90]);for(var s=6;s>=0;s--)i.sprites.push([i.sprite,96*s,0,96,90]);return i.difficulty==r.difficulty.EASY?i.BULLET_VECTORS=[[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2]]:i.difficulty==r.difficulty.NORMAL?i.BULLET_VECTORS=[[0,5],[0,-5],[5,0],[-5,0],[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2]]:i.BULLET_VECTORS=[[0,5],[0,-5],[5,0],[-5,0],[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2],[3,2],[3,-2],[-3,-2],[-3,2]],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"move",value:function(){if(70===this.tickCount&&this.fireBullet(),this.posY<0)this.posY+=2;else{if(this.tickCount>65&&this.tickCount<100)return!1;this.posY+this.speedY>=0&&this.posY+this.speedY<=r.canvasHeight-this.hitboxH?this.posY+=this.speedY:this.antiBumpTechnology()}}},{key:"fireBullet",value:function(){var e=this;a.default.enemyBasicBullet.play();var t={posX:this.posX+Math.floor(this.hitboxW/2)-10,posY:this.posY+Math.floor(this.hitboxH/2)-10};this.BULLET_VECTORS.forEach((function(n){var i=Object.assign({speedX:n[0],speedY:n[1]},t);e.bullets.push(new s.BasicEnemyBullet(i))}))}},{key:"render",value:function(e){this.move(),e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.getSprite()).concat([this.posX,this.posY,this.hitboxW,this.hitboxH]))}},{key:"getSprite",value:function(){this.tickCount>=140&&(this.tickCount=0);var e=this.sprites[Math.floor(this.tickCount/10)];return this.tickCount++,e}}]),t}(o.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(2)),s=n(3),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({speedX:3,speedY:3,posY:-100,posX:Math.floor(350*Math.random())},e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.hp=68,i.sprite=i.images.enemyOculus,i.tickCount=0,i.hitboxW=72,i.hitboxH=120,i.sprites=[],i.difficulty=n;for(var o=0;o<=3;o++)i.sprites.push([i.sprite,48*o,0,48,80]);for(var s=3;s>=0;s--)i.sprites.push([i.sprite,48*s,0,48,80]);return i.difficulty==r.difficulty.EASY?i.BULLET_VECTORS=[[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2]]:i.difficulty==r.difficulty.NORMAL?i.BULLET_VECTORS=[[0,5],[0,-5],[5,0],[-5,0],[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2]]:i.BULLET_VECTORS=[[0,5],[0,-5],[5,0],[-5,0],[-2,4],[2,4],[-2,-4],[2,-4],[4,2],[4,-2],[-4,-2],[-4,2],[3,2],[3,-2],[-3,-2],[-3,2],[-1,-2],[-1,2]],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"move",value:function(){this.posY<0?this.posY+=2:this.tickCount>=24&&this.tickCount<60?this.difficulty==r.difficulty.EASY&&this.tickCount%6==0?this.fireBullet():this.difficulty==r.difficulty.NORMAL&&this.tickCount%3==0?this.fireBullet():this.difficulty==r.difficulty.HARD&&this.tickCount%2==0&&this.fireBullet():(this.posY+this.speedY>=0&&this.posY+this.speedY<=300?this.posY+=this.speedY:this.speedY*=-1,this.posX+this.speedX>=0&&this.posX+this.speedX<=r.canvasWidth-this.hitboxW?this.posX+=this.speedX:this.speedX*=-1)}},{key:"fireBullet",value:function(){a.default.enemyBasicBullet.play();var e={posX:this.posX+Math.floor(this.hitboxW/2)-10,posY:this.posY+Math.floor(this.hitboxH/2)-10};if(this.difficulty==r.difficulty.EASY){var t=this.BULLET_VECTORS[(this.tickCount-24)/6],n=Object.assign({speedX:t[0],speedY:t[1]},e);this.bullets.push(new s.BasicEnemyBullet(n))}else if(this.difficulty==r.difficulty.NORMAL){var i=this.BULLET_VECTORS[(this.tickCount-24)/3],o=Object.assign({speedX:i[0],speedY:i[1]},e);this.bullets.push(new s.BasicEnemyBullet(o))}else{var u=this.BULLET_VECTORS[(this.tickCount-24)/2],l=Object.assign({speedX:u[0],speedY:u[1]},e);this.bullets.push(new s.BasicEnemyBullet(l))}}},{key:"render",value:function(e){this.move(),e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.getSprite()).concat([this.posX,this.posY,this.hitboxW,this.hitboxH]))}},{key:"getSprite",value:function(){this.tickCount>=80&&(this.tickCount=0);var e=this.sprites[Math.floor(this.tickCount/10)];return this.tickCount++,e}}]),t}(o.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(5),r=(i=s)&&i.__esModule?i:{default:i};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;a(this,e);var i=new r.default;this.spriteSheet=i.explosion,this.sprites=[],this.tickCount=31;for(var o=0;o<=192;o+=64)for(var s=0;s<=192;s+=64)this.sprites.push([this.spriteSheet,s,o,64,64,t[0],t[1],n,n]);this.sprites=this.sprites.slice(0).reverse().concat(this.sprites)}return o(e,[{key:"render",value:function(e){this.tickCount>=0?(e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.sprites[Math.floor(this.tickCount)])),this.tickCount--):this.cleanup=!0}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.scores=t.scores,this.tick=0}return i(e,[{key:"render",value:function(e){this.tick%4==0&&(e.clearRect(0,0,o.canvasWidth,50),e.fillStyle="white",e.font="18px arcadeclassicregular",e.fillText("SCORE: "+o.formatScore(this.scores.score),120,30),e.fillText("HI: "+o.formatScore(this.scores.hiScore),260,30),e.fillText("HP",10,30),e.strokeStyle="white",e.strokeRect(35,14,81,18),e.fillStyle="red",e.fillRect(35,15,8*this.game.player.hp,16),this.scores.score>this.scores.hiScore&&(window.localStorage.hiScore=this.scores.score,this.scores.hiScore=this.scores.score),this.tick>300&&(this.tick=0)),this.tick++}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=n(3),r=u(n(4)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e={posX:Math.floor(o.canvasWidth/2),posY:Math.floor(o.canvasHeight/1.2)},n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.actions={moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,fireBullet:!1},n.bulletFx=a.default.playerBullet,n.topSpeed=5,n.hp=10,n.bulletCooldown=0,n.playerBullets=[],n.hitboxW=30,n.hitboxH=46,n.iframe=0,n.playerController(),n.useHover=!1,n.hoverX=0,n.hoverY=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"fireBullet",value:function(){var e={speedX:[-1,0,1][Math.floor(3*Math.random())],speedY:-10,posX:this.posX+Math.floor(this.hitboxW/2)-10,posY:this.posY-20},t=new s.PlayerBulletBasic(e);this.playerBullets.push(t),this.bulletCooldown=6,this.bulletFx.play()}},{key:"calculateInertia",value:function(){this.actions.moveLeft?Math.abs(this.speedX)<this.topSpeed&&this.speedX--:this.speedX<0&&this.speedX++,this.actions.moveRight?Math.abs(this.speedX)<this.topSpeed&&this.speedX++:this.speedX>0&&this.speedX--,this.actions.moveUp?Math.abs(this.speedY)<this.topSpeed&&this.speedY--:this.speedY<0&&this.speedY++,this.actions.moveDown?Math.abs(this.speedY)<this.topSpeed&&this.speedY++:this.speedY>0&&this.speedY--}},{key:"move",value:function(){this.iframe&&this.iframe--,this.actions.fireBullet&&(0===this.bulletCooldown?this.fireBullet():this.bulletCooldown--),this.posX+this.speedX>=0&&this.posX+this.speedX<=o.canvasWidth-this.hitboxW&&(this.posX+=this.speedX),this.posY+this.speedY>=0&&this.posY+this.speedY<=o.canvasHeight-this.hitboxH&&(this.posY+=this.speedY)}},{key:"deleteBullets",value:function(){this.playerBullets=this.playerBullets.filter((function(e){return!e.cleanup}))}},{key:"render",value:function(e){0===this.bulletCooldown&&this.deleteBullets(),1==this.useHover&&this.convertHoverToAction(),this.calculateInertia(),this.move(),e.drawImage.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.getSprite())),1==this.useHover&&this.resetActions()}},{key:"getSprite",value:function(){var e=[0,1][Math.floor(2*Math.random())],t=[[this.images.playerShip,0,0,32,44,this.posX,this.posY,this.hitboxW,this.hitboxH],[this.images.playerShip,32,0,32,44,this.posX,this.posY,this.hitboxW,this.hitboxH]],n=[[this.images.playerShipL,0,0,26,44,this.posX,this.posY,this.hitboxW,this.hitboxH],[this.images.playerShipL,26,0,26,44,this.posX,this.posY,this.hitboxW,this.hitboxH]],i=[[this.images.playerShipR,0,0,26,44,this.posX,this.posY,this.hitboxW,this.hitboxH],[this.images.playerShipR,26,0,26,44,this.posX,this.posY,this.hitboxW,this.hitboxH]];return 0===this.speedX?t[e]:this.speedX<0?n[e]:this.speedX>0?i[e]:void 0}},{key:"resetActions",value:function(){this.actions.moveUp=!1,this.actions.moveRight=!1,this.actions.moveDown=!1,this.actions.moveLeft=!1}},{key:"convertHoverToAction",value:function(){var e=Math.floor(this.posX*(document.getElementById("c-container").offsetWidth/o.canvasWidth)),t=this.posY;this.hoverX<e&&(this.actions.moveLeft=!0),this.hoverX>e&&(this.actions.moveRight=!0),this.hoverY>t&&(this.actions.moveDown=!0),this.hoverY<t&&(this.actions.moveUp=!0),this.hoverX==e&&(this.actions.moveRight=!1),this.hoverY==t&&(this.actions.moveDown=!1)}},{key:"setHoverCoordinates",value:function(e,t){var n=document.getElementById("c-container").getBoundingClientRect(),i=this.getHoverScaleY();this.hoverX=Math.floor(e-n.left),this.hoverY=Math.floor((t-n.top)*i)}},{key:"getHoverScaleY",value:function(){return o.canvasHeight/document.getElementById("m-container").offsetHeight}},{key:"playerController",value:function(){var e=this;document.addEventListener("keydown",(function(t){switch(e.useHover=!1,t.keyCode){case 65:case 37:e.actions.moveLeft=!0;break;case 87:case 38:e.actions.moveUp=!0;break;case 68:case 39:e.actions.moveRight=!0;break;case 83:case 40:e.actions.moveDown=!0;break;case 32:e.actions.fireBullet=!0}})),document.addEventListener("keyup",(function(t){switch(t.keyCode){case 65:case 37:e.actions.moveLeft=!1;break;case 87:case 38:e.actions.moveUp=!1;break;case 68:case 39:e.actions.moveRight=!1;break;case 83:case 40:e.actions.moveDown=!1;break;case 32:e.actions.fireBullet=!1,e.bulletCooldown=0}})),document.getElementById("c-container").addEventListener("mousemove",(function(t){e.useHover=!0,e.setHoverCoordinates(t.clientX,t.clientY)})),document.getElementById("c-container").addEventListener("mousedown",(function(t){e.actions.fireBullet=!0})),document.getElementById("c-container").addEventListener("mouseup",(function(t){e.actions.fireBullet=!1})),document.addEventListener("touchmove",(function(t){e.useHover=!0,e.actions.fireBullet=!0,e.setHoverCoordinates(t.targetTouches[0].pageX,t.targetTouches[0].pageY)})),document.addEventListener("touchend",(function(t){e.useHover=!1,e.actions.fireBullet=!1}))}}]),t}(r.default);t.default=l}]);
//# sourceMappingURL=bundle.js.map